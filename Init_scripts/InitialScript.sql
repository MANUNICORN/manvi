CREATE USER "SHIFT101" PASSWORD 'password';
CREATE ROLE "APPLICATION";
GRANT APPLICATION TO "SHIFT101";


CREATE TABLE CALENDAR
( 
ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
MONTH INTEGER,
YEAR INTEGER,
LASTUPDATED TIMESTAMP,
LASTUPDATEDBY VARCHAR(20)
);

grant ALL PRIVILEGES on CALENDAR to SHIFT101;


CREATE TABLE SHIFTS
( 
ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
SHIFTTYPE VARCHAR(25),
LASTUPDATED TIMESTAMP,
LASTUPDATEDBY VARCHAR(20)
);

grant ALL PRIVILEGES on SHIFTS to SHIFT101;

INSERT INTO SHIFTS( "SHIFTTYPE", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('General (0800-1630 IST)',CURRENT_TIMESTAMP , 'ADMIN');
INSERT INTO SHIFTS( "SHIFTTYPE", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('UK (1430-2230 IST)',CURRENT_TIMESTAMP , 'ADMIN');
INSERT INTO SHIFTS( "SHIFTTYPE", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('Morning (0630-1430 IST)',CURRENT_TIMESTAMP , 'ADMIN');
INSERT INTO SHIFTS( "SHIFTTYPE", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('Night (2230-0630 IST)',CURRENT_TIMESTAMP , 'ADMIN');


CREATE TABLE ROLES
( 
ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
ROLETYPE VARCHAR(25),
LASTUPDATED TIMESTAMP,
LASTUPDATEDBY VARCHAR(20)
);
grant ALL PRIVILEGES on ROLES to SHIFT101;
INSERT INTO ROLES( "ROLETYPE", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('Administrator',CURRENT_TIMESTAMP , 'ADMIN');
INSERT INTO ROLES( "ROLETYPE", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('User',CURRENT_TIMESTAMP , 'ADMIN');
INSERT INTO ROLES( "ROLETYPE", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('LineManager',CURRENT_TIMESTAMP , 'ADMIN');
INSERT INTO ROLES( "ROLETYPE", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('Reconcile',CURRENT_TIMESTAMP , 'ADMIN');


CREATE TABLE USERDATA
( 
ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
NAME VARCHAR(50),
LASTUPDATED TIMESTAMP,
LASTUPDATEDBY VARCHAR(20)
);
grant ALL PRIVILEGES on USERDATA to SHIFT101;
INSERT INTO USERDATA( "NAME", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('Himanshu Sharma',CURRENT_TIMESTAMP , 'ADMIN');
INSERT INTO USERDATA( "NAME", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('Deepak Singh',CURRENT_TIMESTAMP , 'ADMIN');


CREATE TABLE EXCEPTIONTYPES
( 
ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
EXCEPTIONNAME VARCHAR(25),
LASTUPDATED TIMESTAMP,
LASTUPDATEDBY VARCHAR(20)
);
grant ALL PRIVILEGES on EXCEPTIONTYPES to SHIFT101;
INSERT INTO EXCEPTIONTYPES( "EXCEPTIONNAME", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('Week-Off',CURRENT_TIMESTAMP , 'ADMIN');
INSERT INTO EXCEPTIONTYPES( "EXCEPTIONNAME", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('Planned Leave',CURRENT_TIMESTAMP , 'ADMIN');
INSERT INTO EXCEPTIONTYPES( "EXCEPTIONNAME", "LASTUPDATED", "LASTUPDATEDBY" ) VALUES ('Unplanned Leave',CURRENT_TIMESTAMP , 'ADMIN');


CREATE TABLE SHIFTDATA
( 
ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
CALENDAR_ID INTEGER,
SHIFT_ID INTEGER,
EXCEPTION_ID INTEGER,
USER_ID INTEGER,
SHIFTDATE DATE,
LASTUPDATED TIMESTAMP,
LASTUPDATEDBY VARCHAR(20)
);
grant ALL PRIVILEGES on SHIFTDATA to SHIFT101;

